@using MatchFixer.Core.ViewModels.MatchResults
@model List<MatchResultInputViewModel>

@{
	ViewData["Title"] = "Add Results";
}

@if (TempData["SuccessMessage"] != null)
{
	<div class="alert alert-success">@TempData["SuccessMessage"]</div>
}

@if (TempData["ErrorMessage"] != null)
{
	<div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}

<div class="background-profile"></div>


@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<div class="container py-4">
	<div class="row g-4">
		@for (int i = 0; i < Model.Count; i++)
		{
			<div class="col-12 col-md-6 col-lg-4">
				<div class="card shadow-sm h-100 match-result-container">
					<div class="card-body">
						<form asp-action="SubmitResult" asp-controller="Result" method="post" class="add-scores-card">
							@Html.AntiForgeryToken()

							<input type="hidden" asp-for="@Model[i].MatchId" />
							<input type="hidden" asp-for="@Model[i].HomeTeam" />
							<input type="hidden" asp-for="@Model[i].AwayTeam" />

							<h5 class="card-title text-center badge bg-primary">@Model[i].HomeTeam vs @Model[i].AwayTeam</h5>
							<p class="card-subtitle mb-3 text-white text-center badge bg-secondary">
								<strong>@Model[i].DisplayTime</strong>
							</p>

							<div class="d-flex justify-content-center gap-3">
								<div style="width: 100px;">
									<label asp-for="@Model[i].HomeScore" class="form-label text-white text-center w-100">Home</label>
									<input asp-for="@Model[i].HomeScore" class="form-control text-center" min="0" />
									<span asp-validation-for="@Model[i].HomeScore" class="text-danger small d-block text-center"></span>
								</div>
								<div style="width: 100px;">
									<label asp-for="@Model[i].AwayScore" class="form-label text-white text-center w-100">Away</label>
									<input asp-for="@Model[i].AwayScore" class="form-control text-center" min="0" />
									<span asp-validation-for="@Model[i].AwayScore" class="text-danger small d-block text-center"></span>
								</div>
							</div>

							<div class="mb-3 text-center">
								<label asp-for="@Model[i].Notes" class="form-label text-center text-white">Notes (optional)</label>
								<textarea asp-for="@Model[i].Notes" class="form-control" rows="2"></textarea>
								<span asp-validation-for="@Model[i].Notes" class="text-danger"></span>
							</div>

							<button type="submit" class="btn btn-primary">Submit Result</button>
						</form>
					</div>
				</div>
			</div>
		}
	</div>
</div>