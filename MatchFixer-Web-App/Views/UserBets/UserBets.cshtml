@model IEnumerable<MatchFixer.Core.DTOs.Bets.UserBetSlipDTO>


<div class="game-background"></div>

<div class="card custom-card custom-betslip-card shadow-lg rounded-4 p-4">

	<div class="row">
		@foreach (var betSlip in Model)
		{
			<div class="col-md-6 mb-4">
				<div class="card shadow-sm border-primary">
					<div class="card-header bg-primary text-white">
						<strong>Placed:</strong> @betSlip.BetTime.ToLocalTime().ToString("ddd, MMM d, hh:mm tt")
						<span class="float-end"><strong>Status:</strong> @betSlip.Status</span>
					</div>
					<div class="card-body d-flex flex-column justify-content-center align-items-center">
						<p><strong>Amount:</strong> $@betSlip.Amount.ToString("F2")</p>
						<p><strong>Total Odds:</strong> @betSlip.TotalOdds.ToString("F2")</p>
						<p><strong>Potential Win:</strong>
							@{
								decimal displayedAmount = betSlip.WinAmount.HasValue
									? Math.Floor(betSlip.WinAmount.Value * 100) / 100
									: Math.Floor(betSlip.Amount * betSlip.TotalOdds * 100) / 100;
							}

							$@displayedAmount.ToString("0.00")
						</p>

						@if (betSlip.Bets != null && betSlip.Bets.Any())
						{
							<h5 class="mt-3">Bets breakdown:</h5>
							<table class="table table-sm table-bordered user-bets-table text-center">
								<thead class="table-light">
								<tr>
									<th>Match</th>
									<th>Pick</th>
									<th>Odds</th>
									<th>Outcome</th>
								</tr>
								</thead>
								<tbody>
								@foreach (var bet in betSlip.Bets)
								{
									<tr>
										<td>@bet.HomeTeam <strong>vs</strong> @bet.AwayTeam</td>
										<td>
											@if (bet.SelectedOption == "Home")
											{
												<span class="pill-brand-blue">
													@bet.SelectedOption
												</span>
											} else if (bet.SelectedOption == "Away")
											{
												<span class="pill-brand-green">
													@bet.SelectedOption
												</span>
											}
											else
											{
												<span class="pill-brand-yellow">
													@bet.SelectedOption
												</span>
											}
											
										</td>
										<td>@bet.Odds.ToString("F2")</td>
										<td>@bet.Outcome</td>
									</tr>
								}
								</tbody>
							</table>
						}
						else
						{
							<div class="alert alert-warning">No bets found for this betslip.</div>
						}
					</div>
				</div>
			</div>
		}
	</div>
</div>