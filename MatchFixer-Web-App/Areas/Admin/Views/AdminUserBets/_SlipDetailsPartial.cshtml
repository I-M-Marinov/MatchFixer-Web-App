@using MatchFixer.Common.Enums
@model MatchFixer_Web_App.Areas.Admin.ViewModels.Bets.AdminBetSlipDetailsViewModel


<div class="d-flex justify-content-between align-items-center mb-3">
	<form asp-controller="UserBets"
	      asp-action="EvaluateSlip"
	      asp-area=""
	      method="post"
	      class="ms-3">
		@Html.AntiForgeryToken()
		<input type="hidden" name="betSlipId" value="@Model.Id" />
		<button type="submit" class="btn btn-sm re-eval-btn">
			Re-Evaluate Slip
		</button>
	</form>
</div>

<hr />


<div class="d-flex justify-content-center mb-4">
	
	<div class="d-flex flex-row justify-content-center gap-2 mb-3">
		<div>
			<div class="fw-semibold">Slip ID: <span class="badge @Model.StatusBadge">@Model.Id</span></div>
		</div>
	</div>


	<div class="d-flex flex-row justify-content-center gap-xl-5 gap-4 mb-1 stats-bar">

		<!-- Stake -->
		<div class="stat-wrapper">
			<div class="stat-label">
				<i class="bi bi-cash-stack text-primary"></i>
				<span>Stake</span>
			</div>
			<div class="fw-semibold">€@Model.Stake.ToString("F2")</div>
		</div>

		<!-- Total Odds -->
		<div class="stat-wrapper">
			<div class="stat-label">
				<i class="bi bi-lightning-charge-fill" style="color:#facc15;"></i>
				<span>Total Odds</span>
			</div>
			<div class="fw-semibold">@Model.TotalOdds.ToString("F2")</div>
		</div>

		@if (Model.SlipStatus == BetStatus.Pending)
		{
			<!-- Potential -->
			<div class="stat-wrapper">
				<div class="stat-label">
					<i class="bi bi-piggy-bank-fill" style="color:#9333ea;"></i>
					<span>Potential</span>
				</div>
				<div class="fw-semibold">
					€@(Model.PotentialReturn?.ToString("F2") ?? "0.00")
				</div>
			</div>
		}
		else if (Model.SlipStatus == BetStatus.Won)
		{
			<!-- Return -->
			<div class="stat-wrapper">
				<div class="stat-label">
					<i class="bi bi-bag-check-fill" style="color:#16a34a;"></i>
					<span>Return</span>
				</div>
				<div class="fw-semibold">
					€@(Model.WinAmount?.ToString("F2") ?? "0.00")
				</div>
			</div>
		}
		else if (Model.SlipStatus == BetStatus.Lost)
		{
			<!-- Lost Amount -->
			<div class="stat-wrapper">
				<div class="stat-label">
					<i class="bi bi-x-octagon-fill" style="color:#dc2626;"></i>
					<span class="text-danger">Lost Amount</span>
				</div>
				<div class="fw-semibold text-danger">€@Model.Stake.ToString("F2")</div>
			</div>
		}

	</div>
</div>




<hr />

<h6 class="fw-bold text-center">Selections</h6>
<table class="table table-sm align-middle">
	<thead>
	<tr>
		<th>Match</th>
		<th>Pick</th>
		<th>Odds</th>
		<th>Status</th>
	</tr>
	</thead>
	<tbody>
		@foreach (var sel in Model.Selections)
		{
			string pickClass = sel.Pick switch
			{
				"Home" => "pill-brand-blue",
				"Draw" => "pill-brand-yellow",
				"Away" => "pill-brand-green",
				_ => ""
			};

			<tr>
				<td>@sel.MatchName</td>

				<td>
					<span class="@pickClass fw-semibold px-2 py-1 rounded">
						@sel.Pick
					</span>
				</td>

				<td>@sel.Odds</td>

				<td>
					<span class="badge @sel.StatusBadge">@sel.Status</span>
				</td>
			</tr>
		}

	</tbody>
</table>